Test Group(s): #Deployment

Variables in deployment descriptor âŠƒ Variables in config file

Variables in the deployment descriptor (i.e., its ``assign`` attribute) that are not
not contained in the configuration file, should be added at the end of the configuration.
--------------------------------------------------------------------------------

>>> import sys, pathlib, os
>>> import run, provider as prvd, descriptor as dscr

>>> # absolute filepath to ${PWD}/tests/config/example.conf
>>> filepath = os.path.join(pathlib.Path().parent.absolute(), 'tests', 'config', 'example.conf')
>>> # JSON decoding needs four backward slashes
>>> filepath = filepath.replace('\\', '\\\\')

>>> os.environ[dscr.EnvironLoader.SOURCE_ENV_VAR] = \
...     '{"config": "' + filepath + '", "assign": {"pwd": "PASSWORD", "admin_pwd": "ADMIN_PASSWORD"}}'
>>> os.environ['PASSWORD'] = 'bLupdLr4R2HY'
>>> os.environ['ADMIN_PASSWORD'] = 'fS3JV3MuAWg9'

>>> config = run.deploy(dry_run=True)
Deploying secrets and variables into example.conf ...
Templatized found variable(s) 'pwd'.
Templatized added variable(s) not found 'admin_pwd'.
Instantiated template keyword(s) 'PASSWORD, ADMIN_PASSWORD'.

>>> print(config, end='')
[account]
user = admin
pwd  = bLupdLr4R2HY
description =
group = 1
admin_pwd = fS3JV3MuAWg9